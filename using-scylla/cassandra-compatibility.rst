
Scylla and Apache Cassandra Compatibility 
=========================================

Latest update: Scylla 3.0

Scylla 3.0 is a drop-in replacement for Apache Cassandra 3.11, supporting both the data format (SSTable) and all relevant external interfaces, with many features from more advance Apache Cassandra releases.
The following page detailed the level of support for each interface. For more on Cassandra features which are not available yet `see here <http://www.scylladb.com/technology/status/#road-map>`_

For all tables below, the following convention is used:

* NA - Not yet Available in Scylla
* NC - Available, not compatible with Apache Cassandra

Interfaces
----------

==============================  =============================================  =============
Apache Cassandra                Version                                        Comments
==============================  =============================================  =============
CQL                             CQL spec 3.4.0, Native protocol v4 (C* 3.11)   More below
------------------------------  ---------------------------------------------  -------------
Thrift                          Compatible with Cassandra 2.1
------------------------------  ---------------------------------------------  -------------
SSTable format                  3.11(mc), 2.2(la), 2.1.8 (ka)
------------------------------  ---------------------------------------------  -------------
JMX                             3.11                                           More Below
------------------------------  ---------------------------------------------  -------------
Configuration (cassandra.yaml)	3.11
------------------------------  ---------------------------------------------  -------------
Log                             NC
------------------------------  ---------------------------------------------  -------------
Gossip and internal streaming	NC
------------------------------  ---------------------------------------------  -------------
SSL                             NC
==============================  =============================================  =============

..  _3.3.1: https://github.com/apache/cassandra/blob/cassandra-2.2/doc/cql3/CQL.textile#changes

Supported Tools
---------------
(based on Apache Cassandra 3.11 release)


.. include:: /operating-scylla/_common/tools_index.rst

Features
--------

+-----------------------------------+-------------------------------------+-----------------------------------------+
| Feature                           |   Options                           |     Support                             |
+===================================+=====================================+=========================================+
| Consistency Level (read and write)|                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Any (Write Only)                    | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | One                                 | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Two                                 | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Three                               | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Quorum                              | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | All                                 | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Local One                           | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Local Qurum                         | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Each Quorum (Write Only)            | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | SERIAL                              | NA (Follow 1359_ for updates)           |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | LOCAL_SERIAL                        | NA (Follow 1359_ for updates)           |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|row / key cache                    |                                     | NC (More on `Scylla memory and cache`_) |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Secondary Index                    |                                     | YES - from Scylla 3.0 (see 401_) AND    |
|                                   |                                     | from Scylla Enterprise 2019.1           |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Materialized Views                 |                                     | YES - from Scylla 3.0 (see 1141_) AND   |
|                                   |                                     | from Scylla Enterprise 2019.1           |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Lightweight transactions           |                                     | NA (Follow 1359_ for updates)           |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Counters                           |                                     | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Role Based Access Control (RBAC)   |                                     | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|User Define Types                  |                                     | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|User Define Functions              |                                     | NA                                      |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Time to live (TTL)                 |                                     | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Super Column                       |                                     | NA                                      |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Replica placement strategy         |                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | SimpleStrategy                      |   Yes                                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | NetworkTopologyStrategy	          |   Yes                                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Snitch                             |                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | SimpleSnitch_                       |   Yes                                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | RackInferringSnitch_                |   Yes                                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | PropertyFileSnitch                  |   NA                                    |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | GossipingPropertyFileSnitch_        |    Yes                                  |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Dynamic snitching                   |   NA                                    |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | EC2Snitch_                          |    Yes                                  |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | EC2MultiRegionSnitch_               |    Yes                                  |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | GoogleCloudSnitch_                  |    Yes (from Scylla 2.2)                |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | CloudstackSnitch                    |    NA                                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Partitioner                        |                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Murmur3Partitioner (default)        |    Yes                                  |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | RandomPartitioner                   |    Yes                                  |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | OrderPreservingPartitioner          |    NA                                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | ByteOrderedPartitioner              |   Yes                                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | CollatingOrderPreservingPartitioner | 	 NA                                 |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Protocol options                   |                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Compression                         | Yes (see below)                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Encryption_                         | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Authentication_                     | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Authorization_                      | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|CQL Compression                    |                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | LZ4                                 | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Snappy                              | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Internode Compression              | Yes                                 |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|vNode Enable                       |                                     | Yes, default                            |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|vNode Disable                      |                                     | NA                                      |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Triggers                           |                                     | NA                                      |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Batch Requests                     |                                     | Yes (not including conditional updates) |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Repair                             |                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | `Nodetool Repair`_                  | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Incremental Repair                  | NA                                      |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|HintedHandoff_                     |                                     | Yes - from Scylla 3.0                   |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|Backup / Restore                   |                                     |                                         |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Snapshot_                           | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | `Incremental backup`_               | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+
|                                   | Restore_                            | Yes                                     |
+-----------------------------------+-------------------------------------+-----------------------------------------+


.. _401: https://github.com/scylladb/scylla/issues/401
.. _1141: https://github.com/scylladb/scylla/issues/1141
.. _1619: https://github.com/scylladb/scylla/issues/1619
.. _1359: https://github.com/scylladb/scylla/issues/1359
.. _577: https://github.com/scylladb/scylla/issues/577
.. _`Scylla memory and cache`: http://www.scylladb.com/technology/memory/
.. _Encryption: /operating-scylla/security/client_node_encryption/
.. _Authentication: /operating-scylla/security/authentication/
.. _Authorization: /operating-scylla/security/authorization/
.. _`Nodetool Repair`: /operating-scylla/nodetool-commands/repair/
.. _Snapshot: /operating-scylla/procedures/backup-restore/backup/#full-backup-snapshots
.. _`Incremental backup`: /operating-scylla/procedures/backup-restore/backup/#incremental-backup
.. _Restore: /operating-scylla/procedures/backup-restore/restore/
.. _SimpleSnitch: /operating-scylla/system-configuration/snitch/#simplesnitch
.. _RackInferringSnitch: /operating-scylla/system-configuration/snitch/#rackinferringsnitch
.. _GossipingPropertyFileSnitch: /operating-scylla/system-configuration/snitch/#gossipingpropertyfilesnitch/
.. _EC2Snitch: /operating-scylla/system-configuration/snitch/#ec2snitch/
.. _EC2MultiRegionSnitch: /operating-scylla/system-configuration/snitch/#ec2multiregionsnitch
.. _GoogleCloudSnitch: /operating-scylla/system-configuration/snitch/#googlecloudsnitch
.. _HintedHandoff: /architecture/anti-entropy/hinted-handoff/

CQL
---

+----------------------------------+----------------------------------------+------------------------------+
|Feature                           | Options                                | Support                      |
+==================================+========================================+==============================+
|CREATE KEYSPACE                   |                                        |  Yes                         |
+----------------------------------+----------------------------------------+------------------------------+
|                                  |  WITH REPLICATION                      |  Yes (see below)             |
+----------------------------------+----------------------------------------+------------------------------+
|                                  |  DURABLE_WRITES                        |  Yes                         |
+----------------------------------+----------------------------------------+------------------------------+
|                                  |  IF NOT EXISTS                         |  Yes                         |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE KEYSPACE REPLICATION Class |                                        |                              |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | SimpleStrategy                         | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | NetworkTopologyStrategy                | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | OldNetworkTopologyStrategy             | NA                           |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE TABLE                      |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | Primary key column                     | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | compound primary key                   | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | composite partition key	            |   Yes                        |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | clustering order                       | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | static column                          | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE TABLE Att                  |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | bloom_filter_fp_chance                 | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | caching                                | NA (ignored)                 |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | comment                                | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | compaction                             | Yes (see below)              |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | compression                            | Yes (see below)              |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | dclocal_read_repair_chance             | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | default_time_to_live                   | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | gc_grace_seconds                       | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | index_interval                         | NA                           |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | max_index_interval                     | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | memtable_flush_period_in_ms            | NA (ignored)                 |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | min_index_interval                     | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | populate_io_cache_on_flush             | NA                           |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | read_repair_chance                     | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | replicate_on_write                     | NA                           |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | speculative_retry                      | :code:`ALWAYS`, :code:`NONE` |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE TABLE compaction           |                                        |                              |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | SizeTieredCompactionStrategy_ (STCS)   | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | LeveledCompactionStrategy_ (LCS)       | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | DateTieredCompactionStrategy (DTCS)    | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | TimeWindowCompactionStrategy_ (TWCS)   | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE TABLE compression          |                                        |                              |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | sstable_compression LZ4Compressor	    |Yes                           |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | sstable_compression SnappyCompressor   | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | sstable_compression DeflateCompressor  | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | chunk_length_kb                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | crc_check_chance                       | NA                           |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE TABLE compression          |                                        |                              |
+----------------------------------+----------------------------------------+------------------------------+
|ALTER KEYSPACE                    |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|ALTER TABLE                       |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|ALTER TYPE                        |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|ALTER USER                        |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|ALTER ROLE                        |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|BATCH                             |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE TRIGGER                    |                                        | NA                           |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE USER                       |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|CREATE ROLE                       |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|DROP KEYSPACE                     |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|DROP TABLE                        |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|DROP TRIGGER                      |                                        | NA                           |
+----------------------------------+----------------------------------------+------------------------------+
|DROP TYPE                         |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|DROP USER                         |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|DROP ROLE                         |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|GRANT PERMISSIONS                 |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|GRANT ROLE                        |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|INSERT                            |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|Prepared Statements               |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|LIST PERMISSIONS                  |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|LIST USERS                        |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|LIST ROLES                        |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|REVOKE PERMISSIONS                |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|REVOKE ROLE                       |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|SELECT                            |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|TRUNCATE                          |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|UPDATE                            |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|USE                               |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|INDEX                             |                                        | Yes - from Scylla 3.0        |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | CREATE INDEX                           | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | DROP INDEX                             | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|MATERIALIZED VIEW                 |                                        | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | ALTER MATERIALIZED VIEW                | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | CREATE MATERIALIZED VIEW               | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+
|                                  | DROP MATERIALIZED VIEW                 | Yes                          |
+----------------------------------+----------------------------------------+------------------------------+



.. _SizeTieredCompactionStrategy: /getting-started/compaction/#size-tiered-compaction-strategy

.. _LeveledCompactionStrategy: /getting-started/compaction/#leveled-compaction-strategy

.. _TimeWindowCompactionStrategy: /getting-started/compaction/#time-window-compactionstrategy

.. _1432: https://github.com/scylladb/scylla/issues/1432

.. include:: /rst_include/apache-copyrights-index.rst

.. include:: /rst_include/apache-copyrights-index-all-attributes.rst



