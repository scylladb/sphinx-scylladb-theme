Logging
=======

Logging with the systemd journal (CentOS, Amazon AMI, Ubuntu 16.04, Debian 8)
-----------------------------------------------------------------------------
On distributions with systemd, Scylla logs are written to the `systemd journal <http://www.freedesktop.org/software/systemd/man/systemd-journald.service.html>`_. You can retrieve log entries with the `journalctl <http://www.freedesktop.org/software/systemd/man/journalctl.html>`_ command.

Listed below are a few useful examples.

* get logs generated by the "scylla" user: :code:`journalctl _UID=`id -u scylla``
* get logs generated by the "scylla" command: :code:`journalctl _COMM=scylla`
* filter only Scylla logs by priority: :code:`journalctl _COMM=scylla -p err..emerg` or :code:`journalctl _COMM=scylla -p warning`
* filter only Scylla logs by date: :code:`journalctl _COMM=scylla --since="2013-3-16 23:59:59"` or :code:`journalctl _COMM=scylla --since "2015-01-10" --until "2015-01-11 03:00"` or :code:`journalctl _COMM=scylla --since yesterday`
* filter only Scylla logs since last server boot: :code:`journalctl _COMM=scylla -b`

Logging on Ubuntu 14.04
-----------------------
On Ubuntu 14.04, Scylla writes its initial boot message into :code:`/var/log/upstart/scylla-server.log`.

After Scylla has started, logs are stored in :code:`/var/log/syslog`. Scylla logs can be filter by creating a :code:`rsyslog` configuration file with the following rule (for example, in :code:`/etc/rsyslog.d/10-scylla.conf`)

.. code-block:: shell

   :syslogtag, startswith, "scylla" /var/log/scylla/scylla.log 
   & ~

And then creating the log file with the correct permissions and restarting the service:

.. code-block:: shell

   install -o syslog -g adm -m 0640 /dev/null /var/log/scylla/scylla.log
   service rsyslog restart

This will send Scylla only logs to :code:`/var/log/scylla/scylla.log`

Logging on Docker
-----------------
Starting from Scylla 1.3, `Scylla Docker <https://hub.docker.com/r/scylladb/scylla/>`_, you should use :code:`docker logs` command to access Scylla server and JMX proxy logs


.. include:: /rst_include/advance-index.rst

