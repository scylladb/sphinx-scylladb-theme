{"version":3,"file":"index.js","sources":["../dist-src/version.js","../dist-src/add-event-handler.js","../dist-src/oauth-app-octokit.js","../dist-src/emit-event.js","../dist-src/methods/get-user-octokit.js","../dist-src/methods/get-web-flow-authorization-url.js","../dist-src/methods/create-token.js","../dist-src/methods/check-token.js","../dist-src/methods/reset-token.js","../dist-src/methods/refresh-token.js","../dist-src/methods/scope-token.js","../dist-src/methods/delete-token.js","../dist-src/methods/delete-authorization.js","../dist-src/middleware/node/parse-request.js","../dist-src/middleware/node/send-response.js","../dist-src/middleware/on-unhandled-request-default.js","../dist-src/middleware/handle-request.js","../dist-src/middleware/node/index.js","../dist-src/middleware/web-worker/parse-request.js","../dist-src/middleware/web-worker/send-response.js","../dist-src/middleware/web-worker/index.js","../dist-src/middleware/aws-lambda/api-gateway-v2-parse-request.js","../dist-src/middleware/aws-lambda/api-gateway-v2-send-response.js","../dist-src/middleware/aws-lambda/api-gateway-v2.js","../dist-src/index.js"],"sourcesContent":["export const VERSION = \"4.0.8\";\n","export function addEventHandler(state, eventName, eventHandler) {\n    if (Array.isArray(eventName)) {\n        for (const singleEventName of eventName) {\n            addEventHandler(state, singleEventName, eventHandler);\n        }\n        return;\n    }\n    if (!state.eventHandlers[eventName]) {\n        state.eventHandlers[eventName] = [];\n    }\n    state.eventHandlers[eventName].push(eventHandler);\n}\n","import { Octokit } from \"@octokit/core\";\nimport { getUserAgent } from \"universal-user-agent\";\nimport { VERSION } from \"./version\";\nexport const OAuthAppOctokit = Octokit.defaults({\n    userAgent: `octokit-oauth-app.js/${VERSION} ${getUserAgent()}`,\n});\n","export async function emitEvent(state, context) {\n    const { name, action } = context;\n    if (state.eventHandlers[`${name}.${action}`]) {\n        for (const eventHandler of state.eventHandlers[`${name}.${action}`]) {\n            await eventHandler(context);\n        }\n    }\n    if (state.eventHandlers[name]) {\n        for (const eventHandler of state.eventHandlers[name]) {\n            await eventHandler(context);\n        }\n    }\n}\n","import { createOAuthUserAuth, } from \"@octokit/auth-oauth-user\";\nimport { emitEvent } from \"../emit-event\";\nexport async function getUserOctokitWithState(state, options) {\n    return state.octokit.auth({\n        type: \"oauth-user\",\n        ...options,\n        async factory(options) {\n            const octokit = new state.Octokit({\n                authStrategy: createOAuthUserAuth,\n                auth: options,\n            });\n            const authentication = (await octokit.auth({\n                type: \"get\",\n            }));\n            await emitEvent(state, {\n                name: \"token\",\n                action: \"created\",\n                token: authentication.token,\n                scopes: authentication.scopes,\n                authentication,\n                octokit,\n            });\n            return octokit;\n        },\n    });\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nexport function getWebFlowAuthorizationUrlWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        request: state.octokit.request,\n        ...options,\n        allowSignup: options.allowSignup || state.allowSignup,\n        scopes: options.scopes || state.defaultScopes,\n    };\n    return OAuthMethods.getWebFlowAuthorizationUrl({\n        clientType: state.clientType,\n        ...optionsWithDefaults,\n    });\n}\n","import * as OAuthAppAuth from \"@octokit/auth-oauth-app\";\nimport { emitEvent } from \"../emit-event\";\nexport async function createTokenWithState(state, options) {\n    const authentication = await state.octokit.auth({\n        type: \"oauth-user\",\n        ...options,\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"created\",\n        token: authentication.token,\n        scopes: authentication.scopes,\n        authentication,\n        octokit: new state.Octokit({\n            authStrategy: OAuthAppAuth.createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: authentication.token,\n                scopes: authentication.scopes,\n                refreshToken: authentication.refreshToken,\n                expiresAt: authentication.expiresAt,\n                refreshTokenExpiresAt: authentication.refreshTokenExpiresAt,\n            },\n        }),\n    });\n    return { authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nexport async function checkTokenWithState(state, options) {\n    const result = await OAuthMethods.checkToken({\n        // @ts-expect-error not worth the extra code to appease TS\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    });\n    Object.assign(result.authentication, { type: \"token\", tokenType: \"oauth\" });\n    return result;\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { emitEvent } from \"../emit-event\";\nimport { createOAuthUserAuth } from \"@octokit/auth-oauth-user\";\nexport async function resetTokenWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    };\n    if (state.clientType === \"oauth-app\") {\n        const response = await OAuthMethods.resetToken({\n            clientType: \"oauth-app\",\n            ...optionsWithDefaults,\n        });\n        const authentication = Object.assign(response.authentication, {\n            type: \"token\",\n            tokenType: \"oauth\",\n        });\n        await emitEvent(state, {\n            name: \"token\",\n            action: \"reset\",\n            token: response.authentication.token,\n            scopes: response.authentication.scopes || undefined,\n            authentication: authentication,\n            octokit: new state.Octokit({\n                authStrategy: createOAuthUserAuth,\n                auth: {\n                    clientType: state.clientType,\n                    clientId: state.clientId,\n                    clientSecret: state.clientSecret,\n                    token: response.authentication.token,\n                    scopes: response.authentication.scopes,\n                },\n            }),\n        });\n        return { ...response, authentication };\n    }\n    const response = await OAuthMethods.resetToken({\n        clientType: \"github-app\",\n        ...optionsWithDefaults,\n    });\n    const authentication = Object.assign(response.authentication, {\n        type: \"token\",\n        tokenType: \"oauth\",\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"reset\",\n        token: response.authentication.token,\n        authentication: authentication,\n        octokit: new state.Octokit({\n            authStrategy: createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: response.authentication.token,\n            },\n        }),\n    });\n    return { ...response, authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { emitEvent } from \"../emit-event\";\nimport { createOAuthUserAuth } from \"@octokit/auth-oauth-user\";\nexport async function refreshTokenWithState(state, options) {\n    if (state.clientType === \"oauth-app\") {\n        throw new Error(\"[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps\");\n    }\n    const response = await OAuthMethods.refreshToken({\n        clientType: \"github-app\",\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        refreshToken: options.refreshToken,\n    });\n    const authentication = Object.assign(response.authentication, {\n        type: \"token\",\n        tokenType: \"oauth\",\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"refreshed\",\n        token: response.authentication.token,\n        authentication: authentication,\n        octokit: new state.Octokit({\n            authStrategy: createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: response.authentication.token,\n            },\n        }),\n    });\n    return { ...response, authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { createOAuthUserAuth } from \"@octokit/auth-oauth-user\";\nimport { emitEvent } from \"../emit-event\";\nexport async function scopeTokenWithState(state, options) {\n    if (state.clientType === \"oauth-app\") {\n        throw new Error(\"[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps\");\n    }\n    const response = await OAuthMethods.scopeToken({\n        clientType: \"github-app\",\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    });\n    const authentication = Object.assign(response.authentication, {\n        type: \"token\",\n        tokenType: \"oauth\",\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"scoped\",\n        token: response.authentication.token,\n        authentication: authentication,\n        octokit: new state.Octokit({\n            authStrategy: createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: response.authentication.token,\n            },\n        }),\n    });\n    return { ...response, authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { emitEvent } from \"../emit-event\";\nexport async function deleteTokenWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    };\n    const response = state.clientType === \"oauth-app\"\n        ? await OAuthMethods.deleteToken({\n            clientType: \"oauth-app\",\n            ...optionsWithDefaults,\n        })\n        : // istanbul ignore next\n            await OAuthMethods.deleteToken({\n                clientType: \"github-app\",\n                ...optionsWithDefaults,\n            });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"deleted\",\n        token: options.token,\n        octokit: new state.Octokit({\n            authStrategy: createUnauthenticatedAuth,\n            auth: {\n                reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`,\n            },\n        }),\n    });\n    return response;\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { emitEvent } from \"../emit-event\";\nexport async function deleteAuthorizationWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    };\n    const response = state.clientType === \"oauth-app\"\n        ? await OAuthMethods.deleteAuthorization({\n            clientType: \"oauth-app\",\n            ...optionsWithDefaults,\n        })\n        : // istanbul ignore next\n            await OAuthMethods.deleteAuthorization({\n                clientType: \"github-app\",\n                ...optionsWithDefaults,\n            });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"deleted\",\n        token: options.token,\n        octokit: new state.Octokit({\n            authStrategy: createUnauthenticatedAuth,\n            auth: {\n                reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`,\n            },\n        }),\n    });\n    await emitEvent(state, {\n        name: \"authorization\",\n        action: \"deleted\",\n        token: options.token,\n        octokit: new state.Octokit({\n            authStrategy: createUnauthenticatedAuth,\n            auth: {\n                reason: `Handling \"authorization.deleted\" event. The access for the app has been revoked.`,\n            },\n        }),\n    });\n    return response;\n}\n","export function parseRequest(request) {\n    const { method, url, headers } = request;\n    async function text() {\n        const text = await new Promise((resolve, reject) => {\n            let bodyChunks = [];\n            request\n                .on(\"error\", reject)\n                .on(\"data\", (chunk) => bodyChunks.push(chunk))\n                .on(\"end\", () => resolve(Buffer.concat(bodyChunks).toString()));\n        });\n        return text;\n    }\n    return { method, url, headers, text };\n}\n","export function sendResponse(octokitResponse, response) {\n    response.writeHead(octokitResponse.status, octokitResponse.headers);\n    response.end(octokitResponse.text);\n}\n","export function onUnhandledRequestDefault(request) {\n    return {\n        status: 404,\n        headers: { \"content-type\": \"application/json\" },\n        text: JSON.stringify({\n            error: `Unknown route: ${request.method} ${request.url}`,\n        }),\n    };\n}\n","// @ts-ignore - requires esModuleInterop flag\nimport fromEntries from \"fromentries\";\nexport async function handleRequest(app, { pathPrefix = \"/api/github/oauth\" }, request) {\n    if (request.method === \"OPTIONS\") {\n        return {\n            status: 200,\n            headers: {\n                \"access-control-allow-origin\": \"*\",\n                \"access-control-allow-methods\": \"*\",\n                \"access-control-allow-headers\": \"Content-Type, User-Agent, Authorization\",\n            },\n        };\n    }\n    // request.url may include ?query parameters which we don't want for `route`\n    // hence the workaround using new URL()\n    const { pathname } = new URL(request.url, \"http://localhost\");\n    const route = [request.method, pathname].join(\" \");\n    const routes = {\n        getLogin: `GET ${pathPrefix}/login`,\n        getCallback: `GET ${pathPrefix}/callback`,\n        createToken: `POST ${pathPrefix}/token`,\n        getToken: `GET ${pathPrefix}/token`,\n        patchToken: `PATCH ${pathPrefix}/token`,\n        patchRefreshToken: `PATCH ${pathPrefix}/refresh-token`,\n        scopeToken: `POST ${pathPrefix}/token/scoped`,\n        deleteToken: `DELETE ${pathPrefix}/token`,\n        deleteGrant: `DELETE ${pathPrefix}/grant`,\n    };\n    // handle unknown routes\n    if (!Object.values(routes).includes(route)) {\n        return null;\n    }\n    let json;\n    try {\n        const text = await request.text();\n        json = text ? JSON.parse(text) : {};\n    }\n    catch (error) {\n        return {\n            status: 400,\n            headers: {\n                \"content-type\": \"application/json\",\n                \"access-control-allow-origin\": \"*\",\n            },\n            text: JSON.stringify({\n                error: \"[@octokit/oauth-app] request error\",\n            }),\n        };\n    }\n    const { searchParams } = new URL(request.url, \"http://localhost\");\n    const query = fromEntries(searchParams);\n    const headers = request.headers;\n    try {\n        if (route === routes.getLogin) {\n            const { url } = app.getWebFlowAuthorizationUrl({\n                state: query.state,\n                scopes: query.scopes ? query.scopes.split(\",\") : undefined,\n                allowSignup: query.allowSignup !== \"false\",\n                redirectUrl: query.redirectUrl,\n            });\n            return { status: 302, headers: { location: url } };\n        }\n        if (route === routes.getCallback) {\n            if (query.error) {\n                throw new Error(`[@octokit/oauth-app] ${query.error} ${query.error_description}`);\n            }\n            if (!query.code) {\n                throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n            }\n            const { authentication: { token }, } = await app.createToken({\n                code: query.code,\n            });\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"text/html\",\n                },\n                text: `<h1>Token created successfull</h1>\n    \n<p>Your token is: <strong>${token}</strong>. Copy it now as it cannot be shown again.</p>`,\n            };\n        }\n        if (route === routes.createToken) {\n            const { code, redirectUrl } = json;\n            if (!code) {\n                throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n            }\n            const result = await app.createToken({\n                code,\n                redirectUrl,\n            });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 201,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.getToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const result = await app.checkToken({\n                token,\n            });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.patchToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const result = await app.resetToken({ token });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.patchRefreshToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const { refreshToken } = json;\n            if (!refreshToken) {\n                throw new Error(\"[@octokit/oauth-app] refreshToken must be sent in request body\");\n            }\n            const result = await app.refreshToken({ refreshToken });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.scopeToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const result = await app.scopeToken({\n                token,\n                ...json,\n            });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.deleteToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            await app.deleteToken({\n                token,\n            });\n            return {\n                status: 204,\n                headers: { \"access-control-allow-origin\": \"*\" },\n            };\n        }\n        // route === routes.deleteGrant\n        const token = headers.authorization?.substr(\"token \".length);\n        if (!token) {\n            throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n        }\n        await app.deleteAuthorization({\n            token,\n        });\n        return {\n            status: 204,\n            headers: { \"access-control-allow-origin\": \"*\" },\n        };\n    }\n    catch (error) {\n        return {\n            status: 400,\n            headers: {\n                \"content-type\": \"application/json\",\n                \"access-control-allow-origin\": \"*\",\n            },\n            text: JSON.stringify({ error: error.message }),\n        };\n    }\n}\n","import { parseRequest } from \"./parse-request\";\nimport { sendResponse } from \"./send-response\";\nimport { onUnhandledRequestDefault } from \"../on-unhandled-request-default\";\nimport { handleRequest } from \"../handle-request\";\nfunction onUnhandledRequestDefaultNode(request, response) {\n    const octokitRequest = parseRequest(request);\n    const octokitResponse = onUnhandledRequestDefault(octokitRequest);\n    sendResponse(octokitResponse, response);\n}\nexport function createNodeMiddleware(app, { pathPrefix, onUnhandledRequest = onUnhandledRequestDefaultNode, } = {}) {\n    return async function (request, response, next) {\n        const octokitRequest = parseRequest(request);\n        const octokitResponse = await handleRequest(app, { pathPrefix }, octokitRequest);\n        if (octokitResponse) {\n            sendResponse(octokitResponse, response);\n        }\n        else if (typeof next === \"function\") {\n            next();\n        }\n        else {\n            onUnhandledRequest(request, response);\n        }\n    };\n}\n","export function parseRequest(request) {\n    // @ts-ignore Worker environment supports fromEntries/entries.\n    const headers = Object.fromEntries(request.headers.entries());\n    return {\n        method: request.method,\n        url: request.url,\n        headers,\n        text: () => request.text(),\n    };\n}\n","export function sendResponse(octokitResponse) {\n    return new Response(octokitResponse.text, {\n        status: octokitResponse.status,\n        headers: octokitResponse.headers,\n    });\n}\n","import { parseRequest } from \"./parse-request\";\nimport { sendResponse } from \"./send-response\";\nimport { handleRequest } from \"../handle-request\";\nimport { onUnhandledRequestDefault } from \"../on-unhandled-request-default\";\nasync function onUnhandledRequestDefaultWebWorker(request) {\n    const octokitRequest = parseRequest(request);\n    const octokitResponse = onUnhandledRequestDefault(octokitRequest);\n    return sendResponse(octokitResponse);\n}\nexport function createWebWorkerHandler(app, { pathPrefix, onUnhandledRequest = onUnhandledRequestDefaultWebWorker, } = {}) {\n    return async function (request) {\n        const octokitRequest = parseRequest(request);\n        const octokitResponse = await handleRequest(app, { pathPrefix }, octokitRequest);\n        return octokitResponse\n            ? sendResponse(octokitResponse)\n            : await onUnhandledRequest(request);\n    };\n}\n/** @deprecated */\nexport function createCloudflareHandler(...args) {\n    args[0].octokit.log.warn(\"[@octokit/oauth-app] `createCloudflareHandler` is deprecated, use `createWebWorkerHandler` instead\");\n    return createWebWorkerHandler(...args);\n}\n","export function parseRequest(request) {\n    const { method } = request.requestContext.http;\n    let url = request.rawPath;\n    const { stage } = request.requestContext;\n    if (url.startsWith(\"/\" + stage))\n        url = url.substring(stage.length + 1);\n    if (request.rawQueryString)\n        url += \"?\" + request.rawQueryString;\n    const headers = request.headers;\n    const text = async () => request.body || \"\";\n    return { method, url, headers, text };\n}\n","export function sendResponse(octokitResponse) {\n    return {\n        statusCode: octokitResponse.status,\n        headers: octokitResponse.headers,\n        body: octokitResponse.text,\n    };\n}\n","import { parseRequest } from \"./api-gateway-v2-parse-request\";\nimport { sendResponse } from \"./api-gateway-v2-send-response\";\nimport { handleRequest } from \"../handle-request\";\nimport { onUnhandledRequestDefault } from \"../on-unhandled-request-default\";\nasync function onUnhandledRequestDefaultAWSAPIGatewayV2(event) {\n    const request = parseRequest(event);\n    const response = onUnhandledRequestDefault(request);\n    return sendResponse(response);\n}\nexport function createAWSLambdaAPIGatewayV2Handler(app, { pathPrefix, onUnhandledRequest = onUnhandledRequestDefaultAWSAPIGatewayV2, } = {}) {\n    return async function (event) {\n        const request = parseRequest(event);\n        const response = await handleRequest(app, { pathPrefix }, request);\n        return response ? sendResponse(response) : onUnhandledRequest(event);\n    };\n}\n","import { createOAuthAppAuth } from \"@octokit/auth-oauth-app\";\nimport { VERSION } from \"./version\";\nimport { addEventHandler } from \"./add-event-handler\";\nimport { OAuthAppOctokit } from \"./oauth-app-octokit\";\nimport { getUserOctokitWithState, } from \"./methods/get-user-octokit\";\nimport { getWebFlowAuthorizationUrlWithState, } from \"./methods/get-web-flow-authorization-url\";\nimport { createTokenWithState, } from \"./methods/create-token\";\nimport { checkTokenWithState, } from \"./methods/check-token\";\nimport { resetTokenWithState, } from \"./methods/reset-token\";\nimport { refreshTokenWithState, } from \"./methods/refresh-token\";\nimport { scopeTokenWithState, } from \"./methods/scope-token\";\nimport { deleteTokenWithState, } from \"./methods/delete-token\";\nimport { deleteAuthorizationWithState, } from \"./methods/delete-authorization\";\nexport { createNodeMiddleware } from \"./middleware/node/index\";\nexport { createCloudflareHandler, createWebWorkerHandler, } from \"./middleware/web-worker/index\";\nexport { createAWSLambdaAPIGatewayV2Handler } from \"./middleware/aws-lambda/api-gateway-v2\";\nexport class OAuthApp {\n    constructor(options) {\n        const Octokit = options.Octokit || OAuthAppOctokit;\n        this.type = (options.clientType ||\n            \"oauth-app\");\n        const octokit = new Octokit({\n            authStrategy: createOAuthAppAuth,\n            auth: {\n                clientType: this.type,\n                clientId: options.clientId,\n                clientSecret: options.clientSecret,\n            },\n        });\n        const state = {\n            clientType: this.type,\n            clientId: options.clientId,\n            clientSecret: options.clientSecret,\n            // @ts-expect-error defaultScopes not permitted for GitHub Apps\n            defaultScopes: options.defaultScopes || [],\n            allowSignup: options.allowSignup,\n            baseUrl: options.baseUrl,\n            log: options.log,\n            Octokit,\n            octokit,\n            eventHandlers: {},\n        };\n        this.on = addEventHandler.bind(null, state);\n        // @ts-expect-error TODO: figure this out\n        this.octokit = octokit;\n        this.getUserOctokit = getUserOctokitWithState.bind(null, state);\n        this.getWebFlowAuthorizationUrl = getWebFlowAuthorizationUrlWithState.bind(null, state);\n        this.createToken = createTokenWithState.bind(null, state);\n        this.checkToken = checkTokenWithState.bind(null, state);\n        this.resetToken = resetTokenWithState.bind(null, state);\n        this.refreshToken = refreshTokenWithState.bind(null, state);\n        this.scopeToken = scopeTokenWithState.bind(null, state);\n        this.deleteToken = deleteTokenWithState.bind(null, state);\n        this.deleteAuthorization = deleteAuthorizationWithState.bind(null, state);\n    }\n    static defaults(defaults) {\n        const OAuthAppWithDefaults = class extends this {\n            constructor(...args) {\n                super({\n                    ...defaults,\n                    ...args[0],\n                });\n            }\n        };\n        return OAuthAppWithDefaults;\n    }\n}\nOAuthApp.VERSION = VERSION;\n"],"names":["VERSION","addEventHandler","state","eventName","eventHandler","Array","isArray","singleEventName","eventHandlers","push","OAuthAppOctokit","Octokit","defaults","userAgent","getUserAgent","emitEvent","context","name","action","getUserOctokitWithState","options","octokit","auth","type","factory","authStrategy","createOAuthUserAuth","authentication","token","scopes","getWebFlowAuthorizationUrlWithState","optionsWithDefaults","clientId","request","allowSignup","defaultScopes","OAuthMethods","clientType","createTokenWithState","OAuthAppAuth","clientSecret","refreshToken","expiresAt","refreshTokenExpiresAt","checkTokenWithState","result","Object","assign","tokenType","resetTokenWithState","response","undefined","refreshTokenWithState","Error","scopeTokenWithState","deleteTokenWithState","createUnauthenticatedAuth","reason","deleteAuthorizationWithState","parseRequest","method","url","headers","text","Promise","resolve","reject","bodyChunks","on","chunk","Buffer","concat","toString","sendResponse","octokitResponse","writeHead","status","end","onUnhandledRequestDefault","JSON","stringify","error","handleRequest","app","pathPrefix","pathname","URL","route","join","routes","getLogin","getCallback","createToken","getToken","patchToken","patchRefreshToken","scopeToken","deleteToken","deleteGrant","values","includes","json","parse","searchParams","query","fromEntries","getWebFlowAuthorizationUrl","split","redirectUrl","location","error_description","code","authorization","substr","length","checkToken","resetToken","deleteAuthorization","message","onUnhandledRequestDefaultNode","octokitRequest","createNodeMiddleware","onUnhandledRequest","next","entries","Response","onUnhandledRequestDefaultWebWorker","createWebWorkerHandler","createCloudflareHandler","args","log","warn","requestContext","http","rawPath","stage","startsWith","substring","rawQueryString","body","statusCode","onUnhandledRequestDefaultAWSAPIGatewayV2","event","createAWSLambdaAPIGatewayV2Handler","OAuthApp","constructor","createOAuthAppAuth","baseUrl","bind","getUserOctokit","OAuthAppWithDefaults"],"mappings":"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"}